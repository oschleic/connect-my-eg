{"ast":null,"code":"function checkIsAuthenticated() {\n  const that = this;\n\n  if (localStorage.getItem(\"token\") === null) {\n    return false;\n  }\n\n  var data = {\n    name: this.state.name\n  };\n  fetch(\"/auth\", {\n    headers: {\n      'Accept': 'application/x-www-form-urlencoded',\n      'Content-Type': 'application/x-www-form-urlencoded',\n      'authorization': localStorage.getItem(\"token\")\n    },\n    method: \"GET\"\n  }).then(r => r.json().then(data => ({\n    status: r.status,\n    body: data\n  }))).then(function (res) {\n    if (res.status === 200) {\n      if (res.body.ip === '' || res.body.ip == undefined || res.body.ip == false) {\n        this.setState({\n          errorMessage: \"Your device appears to be offline\"\n        });\n        return;\n      }\n\n      that.setState({\n        message: \"Device found! Connecting..\",\n        errorMessage: \"\"\n      });\n      window.location.replace(`http://${res.body.ip}:5000`);\n    } else if (res.status === 401 || res.status === 403) {\n      localStorage.removeItem(\"token\");\n    } else {\n      var errmsg = res.body.error;\n      that.setState({\n        errorMessage: errmsg\n      });\n    }\n  }).catch(function (res) {\n    console.log(res);\n  });\n}\n\nfunction authSignUp() {}\n\nfunction authLogin() {}\n\nfunction authLogout() {\n  localStorage.removeItem(\"token\");\n}","map":{"version":3,"sources":["C:/Users/Schle/personal/evergreen/V2/client/src/Services/Auth.js"],"names":["checkIsAuthenticated","that","localStorage","getItem","data","name","state","fetch","headers","method","then","r","json","status","body","res","ip","undefined","setState","errorMessage","message","window","location","replace","removeItem","errmsg","error","catch","console","log","authSignUp","authLogin","authLogout"],"mappings":"AAAA,SAASA,oBAAT,GAA+B;AAC3B,QAAMC,IAAI,GAAG,IAAb;;AAEA,MAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,MAAkC,IAArC,EAA0C;AACtC,WAAO,KAAP;AACH;;AACD,MAAIC,IAAI,GAAE;AACNC,IAAAA,IAAI,EAAE,KAAKC,KAAL,CAAWD;AADX,GAAV;AAIAE,EAAAA,KAAK,CAAC,OAAD,EAAS;AACVC,IAAAA,OAAO,EAAE;AACT,gBAAU,mCADD;AAET,sBAAgB,mCAFP;AAGT,uBAAiBN,YAAY,CAACC,OAAb,CAAqB,OAArB;AAHR,KADC;AAMVM,IAAAA,MAAM,EAAE;AANE,GAAT,CAAL,CAQCC,IARD,CAQMC,CAAC,IAAKA,CAAC,CAACC,IAAF,GAASF,IAAT,CAAcN,IAAI,KAAK;AAACS,IAAAA,MAAM,EAAEF,CAAC,CAACE,MAAX;AAAmBC,IAAAA,IAAI,EAAEV;AAAzB,GAAL,CAAlB,CARZ,EASCM,IATD,CASM,UAASK,GAAT,EAAa;AACf,QAAGA,GAAG,CAACF,MAAJ,KAAe,GAAlB,EAAsB;AAClB,UAAIE,GAAG,CAACD,IAAJ,CAASE,EAAT,KAAgB,EAAhB,IAAsBD,GAAG,CAACD,IAAJ,CAASE,EAAT,IAAeC,SAArC,IAAkDF,GAAG,CAACD,IAAJ,CAASE,EAAT,IAAe,KAArE,EAA4E;AACxE,aAAKE,QAAL,CAAc;AAAEC,UAAAA,YAAY,EAAE;AAAhB,SAAd;AACA;AACH;;AACDlB,MAAAA,IAAI,CAACiB,QAAL,CAAc;AACVE,QAAAA,OAAO,EAAG,4BADA;AAEVD,QAAAA,YAAY,EAAE;AAFJ,OAAd;AAIAE,MAAAA,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAyB,UAASR,GAAG,CAACD,IAAJ,CAASE,EAAG,OAA9C;AACH,KAVD,MAWK,IAAGD,GAAG,CAACF,MAAJ,KAAe,GAAf,IAAsBE,GAAG,CAACF,MAAJ,KAAe,GAAxC,EAA4C;AAC7CX,MAAAA,YAAY,CAACsB,UAAb,CAAwB,OAAxB;AACH,KAFI,MAGD;AACA,UAAIC,MAAM,GAAGV,GAAG,CAACD,IAAJ,CAASY,KAAtB;AACAzB,MAAAA,IAAI,CAACiB,QAAL,CAAc;AAAEC,QAAAA,YAAY,EAAGM;AAAjB,OAAd;AACH;AACJ,GA5BD,EA6BCE,KA7BD,CA6BO,UAASZ,GAAT,EAAa;AAAEa,IAAAA,OAAO,CAACC,GAAR,CAAYd,GAAZ;AAAkB,GA7BxC;AA8BH;;AAED,SAASe,UAAT,GAAqB,CAEpB;;AAED,SAASC,SAAT,GAAoB,CAEnB;;AAED,SAASC,UAAT,GAAqB;AACjB9B,EAAAA,YAAY,CAACsB,UAAb,CAAwB,OAAxB;AACH","sourcesContent":["function checkIsAuthenticated(){\r\n    const that = this;\r\n\r\n    if(localStorage.getItem(\"token\") === null){\r\n        return false;\r\n    }\r\n    var data ={\r\n        name: this.state.name,\r\n    };\r\n\r\n    fetch(\"/auth\",{\r\n        headers: {\r\n        'Accept': 'application/x-www-form-urlencoded',\r\n        'Content-Type': 'application/x-www-form-urlencoded',\r\n        'authorization': localStorage.getItem(\"token\")\r\n        },\r\n        method: \"GET\",\r\n    })\r\n    .then(r =>  r.json().then(data => ({status: r.status, body: data})))\r\n    .then(function(res){ \r\n        if(res.status === 200){\r\n            if (res.body.ip === '' || res.body.ip == undefined || res.body.ip == false) {\r\n                this.setState({ errorMessage: \"Your device appears to be offline\" });\r\n                return;\r\n            }\r\n            that.setState({ \r\n                message:  \"Device found! Connecting..\",\r\n                errorMessage: \"\",\r\n            });\r\n            window.location.replace(`http://${res.body.ip}:5000`)\r\n        }\r\n        else if(res.status === 401 || res.status === 403){\r\n            localStorage.removeItem(\"token\");\r\n        }\r\n        else{\r\n            var errmsg = res.body.error;\r\n            that.setState({ errorMessage:  errmsg});\r\n        }\r\n    })\r\n    .catch(function(res){ console.log(res) })\r\n}\r\n\r\nfunction authSignUp(){\r\n\r\n}\r\n\r\nfunction authLogin(){\r\n\r\n}\r\n\r\nfunction authLogout(){\r\n    localStorage.removeItem(\"token\");\r\n}"]},"metadata":{},"sourceType":"module"}