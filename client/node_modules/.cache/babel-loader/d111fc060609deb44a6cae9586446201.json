{"ast":null,"code":"export const getAuth = async () => {\n  if (localStorage.getItem(\"token\") === null) {\n    return false;\n  }\n\n  fetch(\"/auth\", {\n    headers: {\n      'Accept': 'application/x-www-form-urlencoded',\n      'Content-Type': 'application/x-www-form-urlencoded',\n      'authorization': localStorage.getItem(\"token\")\n    },\n    method: \"GET\"\n  }).then(r => r.json().then(data => ({\n    status: r.status,\n    body: data\n  }))).then(function (res) {\n    if (res.status === 200) {\n      return true;\n    } else if (res.status === 401 || res.status === 403) {\n      localStorage.removeItem(\"token\");\n      window.location.replace(\"/login\");\n    }\n\n    return false;\n  }).catch(function (res) {\n    console.log(res);\n  });\n};\nexport default getAuth;","map":{"version":3,"sources":["C:/Users/Schle/personal/evergreen/V2/client/src/Middleware/auth.js"],"names":["getAuth","localStorage","getItem","fetch","headers","method","then","r","json","data","status","body","res","removeItem","window","location","replace","catch","console","log"],"mappings":"AACA,OAAO,MAAMA,OAAO,GAAG,YAAY;AAC/B,MAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,MAAkC,IAArC,EAA0C;AACtC,WAAO,KAAP;AACH;;AAEDC,EAAAA,KAAK,CAAC,OAAD,EAAS;AACVC,IAAAA,OAAO,EAAE;AACT,gBAAU,mCADD;AAET,sBAAgB,mCAFP;AAGT,uBAAiBH,YAAY,CAACC,OAAb,CAAqB,OAArB;AAHR,KADC;AAMVG,IAAAA,MAAM,EAAE;AANE,GAAT,CAAL,CAQCC,IARD,CAQMC,CAAC,IAAKA,CAAC,CAACC,IAAF,GAASF,IAAT,CAAcG,IAAI,KAAK;AAACC,IAAAA,MAAM,EAAEH,CAAC,CAACG,MAAX;AAAmBC,IAAAA,IAAI,EAAEF;AAAzB,GAAL,CAAlB,CARZ,EASCH,IATD,CASM,UAASM,GAAT,EAAa;AACf,QAAGA,GAAG,CAACF,MAAJ,KAAe,GAAlB,EAAsB;AAClB,aAAO,IAAP;AACH,KAFD,MAGK,IAAGE,GAAG,CAACF,MAAJ,KAAe,GAAf,IAAsBE,GAAG,CAACF,MAAJ,KAAe,GAAxC,EAA4C;AAC7CT,MAAAA,YAAY,CAACY,UAAb,CAAwB,OAAxB;AACAC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,QAAxB;AACH;;AACD,WAAO,KAAP;AACH,GAlBD,EAmBCC,KAnBD,CAmBO,UAASL,GAAT,EAAa;AAAEM,IAAAA,OAAO,CAACC,GAAR,CAAYP,GAAZ;AAAkB,GAnBxC;AAoBH,CAzBM;AA6BP,eAAeZ,OAAf","sourcesContent":["\r\nexport const getAuth = async () => {\r\n    if(localStorage.getItem(\"token\") === null){\r\n        return false;\r\n    }\r\n\r\n    fetch(\"/auth\",{\r\n        headers: {\r\n        'Accept': 'application/x-www-form-urlencoded',\r\n        'Content-Type': 'application/x-www-form-urlencoded',\r\n        'authorization': localStorage.getItem(\"token\")\r\n        },\r\n        method: \"GET\",\r\n    })\r\n    .then(r =>  r.json().then(data => ({status: r.status, body: data})))\r\n    .then(function(res){ \r\n        if(res.status === 200){\r\n            return true;\r\n        }\r\n        else if(res.status === 401 || res.status === 403){\r\n            localStorage.removeItem(\"token\");\r\n            window.location.replace(\"/login\");\r\n        }\r\n        return false;\r\n    })\r\n    .catch(function(res){ console.log(res) })\r\n}\r\n\r\n\r\n\r\nexport default getAuth;"]},"metadata":{},"sourceType":"module"}